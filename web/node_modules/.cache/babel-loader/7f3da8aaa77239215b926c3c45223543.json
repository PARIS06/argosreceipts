{"ast":null,"code":"var _jsxFileName = \"/Users/moabdo-business/Desktop/argoswebapp/web/src/hoc/WithAuth/index.js\";\nimport React, { Component } from 'react';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux'; // Handle redirects for /login, /register and /panel\n\nconst withAuth = WrappedComponent => {\n  return class extends Component {\n    componentDidMount() {\n      this.shouldRedirect(this.props);\n    }\n\n    shouldComponentUpdate(nextProps) {\n      this.shouldRedirect(nextProps);\n      return true;\n    }\n\n    shouldRedirect(props) {\n      const {\n        match,\n        location,\n        history\n      } = this.props; // If we are on login/register and auth is complete, redirect to /panel\n      // Otherwise redirect to /login\n\n      if ((location.pathname === '/' || location.pathname === '/') && props.authStatus) {\n        this.props.history.push('/panel');\n      } else if (location.pathname.startsWith('/panel') && !props.authStatus) {\n        this.props.history.push('/');\n      }\n    }\n\n    render() {\n      return React.createElement(WrappedComponent, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      }));\n    }\n\n  };\n};\n\nconst mapStateToProps = state => {\n  return {\n    authStatus: state.auth.status\n  };\n};\n\nexport default compose(connect(mapStateToProps), withAuth);","map":{"version":3,"sources":["/Users/moabdo-business/Desktop/argoswebapp/web/src/hoc/WithAuth/index.js"],"names":["React","Component","compose","connect","withAuth","WrappedComponent","componentDidMount","shouldRedirect","props","shouldComponentUpdate","nextProps","match","location","history","pathname","authStatus","push","startsWith","render","mapStateToProps","state","auth","status"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,OAAxB;AACA,SAASC,OAAT,QAAwB,aAAxB,C,CAEA;;AACA,MAAMC,QAAQ,GAAGC,gBAAgB,IAAI;AAClC,SAAO,cAAcJ,SAAd,CAAwB;AAC5BK,IAAAA,iBAAiB,GAAG;AACjB,WAAKC,cAAL,CAAoB,KAAKC,KAAzB;AACF;;AAEDC,IAAAA,qBAAqB,CAACC,SAAD,EAAY;AAC9B,WAAKH,cAAL,CAAoBG,SAApB;AAEA,aAAO,IAAP;AACF;;AAEDH,IAAAA,cAAc,CAACC,KAAD,EAAQ;AACpB,YAAM;AAAEG,QAAAA,KAAF;AAASC,QAAAA,QAAT;AAAmBC,QAAAA;AAAnB,UAA+B,KAAKL,KAA1C,CADoB,CAGnB;AACA;;AACA,UAAI,CAACI,QAAQ,CAACE,QAAT,KAAsB,GAAtB,IAA6BF,QAAQ,CAACE,QAAT,KAAsB,GAApD,KAA4DN,KAAK,CAACO,UAAtE,EAAkF;AAC/E,aAAKP,KAAL,CAAWK,OAAX,CAAmBG,IAAnB,CAAwB,QAAxB;AACF,OAFD,MAGK,IAAIJ,QAAQ,CAACE,QAAT,CAAkBG,UAAlB,CAA6B,QAA7B,KAA0C,CAACT,KAAK,CAACO,UAArD,EAAiE;AACnE,aAAKP,KAAL,CAAWK,OAAX,CAAmBG,IAAnB,CAAwB,GAAxB;AACF;AACH;;AAEDE,IAAAA,MAAM,GAAG;AACN,aAAO,oBAAC,gBAAD,oBAAsB,KAAKV,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;AACF;;AA1B2B,GAA/B;AA4BF,CA7BD;;AA+BA,MAAMW,eAAe,GAAGC,KAAK,IAAI;AAC9B,SAAO;AACJL,IAAAA,UAAU,EAAEK,KAAK,CAACC,IAAN,CAAWC;AADnB,GAAP;AAGF,CAJD;;AAMA,eAAepB,OAAO,CACnBC,OAAO,CAACgB,eAAD,CADY,EAEnBf,QAFmB,CAAtB","sourcesContent":["import React, { Component } from 'react';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\n\n// Handle redirects for /login, /register and /panel\nconst withAuth = WrappedComponent => {\n   return class extends Component {\n      componentDidMount() {\n         this.shouldRedirect(this.props);\n      }\n\n      shouldComponentUpdate(nextProps) {\n         this.shouldRedirect(nextProps);\n\n         return true;\n      }\n\n      shouldRedirect(props) {\n        const { match, location, history } = this.props\n\n         // If we are on login/register and auth is complete, redirect to /panel\n         // Otherwise redirect to /login\n         if ((location.pathname === '/' || location.pathname === '/') && props.authStatus) {\n            this.props.history.push('/panel');\n         } \n         else if (location.pathname.startsWith('/panel') && !props.authStatus) {\n            this.props.history.push('/');\n         }\n      }\n\n      render() {\n         return <WrappedComponent {...this.props} />;\n      }\n   };\n};\n\nconst mapStateToProps = state => {\n   return {\n      authStatus: state.auth.status\n   };\n};\n\nexport default compose(\n   connect(mapStateToProps),\n   withAuth\n);\n"]},"metadata":{},"sourceType":"module"}