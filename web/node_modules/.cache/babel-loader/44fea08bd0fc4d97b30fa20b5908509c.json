{"ast":null,"code":"import { updateAPIConfig } from '../../api/base';\nimport { loginUser, registerUser } from '../../api/auth';\nimport * as actionTypes from './actionTypes'; // Tools\n\nimport { setAuthToken } from '../../utils/tools';\nexport const setAuthStatus = (status, email = null) => ({\n  type: actionTypes.SET_AUTH_STATUS,\n  status,\n  email\n});\nexport const setUserType = (status, email = null) => ({\n  type: actionTypes.SET_USER_TYPE,\n  status,\n  email\n}); // Login\n\nexport const login = data => async dispatch => {\n  try {\n    const token = await loginUser(data);\n    console.log(token.token);\n\n    if (!token) {\n      dispatch(setAuthStatus(false));\n      return;\n    }\n\n    if (token.user_type === 1) {\n      dispatch(setUserType(false));\n    }\n\n    setAuthToken(token);\n    updateAPIConfig({\n      authToken: token\n    });\n    dispatch(setAuthStatus(true));\n  } catch (err) {\n    dispatch(setAuthStatus(false));\n  }\n}; // Register\n\nexport const register = data => async dispatch => {\n  try {\n    const user = await registerUser(data);\n\n    if (!user) {\n      dispatch(setAuthStatus(false));\n      return;\n    }\n\n    if (user.user_type === 1) {\n      dispatch(setUserType(false));\n    }\n\n    dispatch(setAuthStatus(true));\n  } catch (err) {\n    dispatch(setAuthStatus(false));\n  }\n};","map":{"version":3,"sources":["/Users/moabdo-business/Desktop/argoswebapp/web/src/store/Actions/auth.js"],"names":["updateAPIConfig","loginUser","registerUser","actionTypes","setAuthToken","setAuthStatus","status","email","type","SET_AUTH_STATUS","setUserType","SET_USER_TYPE","login","data","dispatch","token","console","log","user_type","authToken","err","register","user"],"mappings":"AAAA,SAASA,eAAT,QAAgC,gBAAhC;AACA,SAASC,SAAT,EAAoBC,YAApB,QAAwC,gBAAxC;AACA,OAAO,KAAKC,WAAZ,MAA6B,eAA7B,C,CAEA;;AACA,SAASC,YAAT,QAA6B,mBAA7B;AAEA,OAAO,MAAMC,aAAa,GAAG,CAACC,MAAD,EAASC,KAAK,GAAG,IAAjB,MAA2B;AACrDC,EAAAA,IAAI,EAAEL,WAAW,CAACM,eADmC;AAErDH,EAAAA,MAFqD;AAGrDC,EAAAA;AAHqD,CAA3B,CAAtB;AAMP,OAAO,MAAMG,WAAW,GAAG,CAACJ,MAAD,EAASC,KAAK,GAAG,IAAjB,MAA2B;AACnDC,EAAAA,IAAI,EAAEL,WAAW,CAACQ,aADiC;AAEnDL,EAAAA,MAFmD;AAGnDC,EAAAA;AAHmD,CAA3B,CAApB,C,CAMP;;AACA,OAAO,MAAMK,KAAK,GAAGC,IAAI,IAAI,MAAMC,QAAN,IAAkB;AAC5C,MAAI;AACD,UAAMC,KAAK,GAAG,MAAMd,SAAS,CAACY,IAAD,CAA7B;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACA,KAAlB;;AACA,QAAI,CAACA,KAAL,EAAY;AACTD,MAAAA,QAAQ,CAACT,aAAa,CAAC,KAAD,CAAd,CAAR;AACA;AACF;;AAED,QAAIU,KAAK,CAACG,SAAN,KAAoB,CAAxB,EAA2B;AACxBJ,MAAAA,QAAQ,CAACJ,WAAW,CAAC,KAAD,CAAZ,CAAR;AACF;;AAEDN,IAAAA,YAAY,CAACW,KAAD,CAAZ;AACAf,IAAAA,eAAe,CAAC;AAAEmB,MAAAA,SAAS,EAAEJ;AAAb,KAAD,CAAf;AACAD,IAAAA,QAAQ,CAACT,aAAa,CAAC,IAAD,CAAd,CAAR;AACF,GAfD,CAeE,OAAOe,GAAP,EAAY;AACXN,IAAAA,QAAQ,CAACT,aAAa,CAAC,KAAD,CAAd,CAAR;AACF;AACH,CAnBM,C,CAqBP;;AACA,OAAO,MAAMgB,QAAQ,GAAGR,IAAI,IAAI,MAAMC,QAAN,IAAkB;AAC/C,MAAI;AACD,UAAMQ,IAAI,GAAG,MAAMpB,YAAY,CAACW,IAAD,CAA/B;;AACA,QAAI,CAACS,IAAL,EAAW;AACRR,MAAAA,QAAQ,CAACT,aAAa,CAAC,KAAD,CAAd,CAAR;AACA;AACF;;AAED,QAAIiB,IAAI,CAACJ,SAAL,KAAmB,CAAvB,EAA0B;AACvBJ,MAAAA,QAAQ,CAACJ,WAAW,CAAC,KAAD,CAAZ,CAAR;AACF;;AAEDI,IAAAA,QAAQ,CAACT,aAAa,CAAC,IAAD,CAAd,CAAR;AACF,GAZD,CAYE,OAAOe,GAAP,EAAY;AACXN,IAAAA,QAAQ,CAACT,aAAa,CAAC,KAAD,CAAd,CAAR;AACF;AACH,CAhBM","sourcesContent":["import { updateAPIConfig } from '../../api/base';\nimport { loginUser, registerUser } from '../../api/auth';\nimport * as actionTypes from './actionTypes';\n\n// Tools\nimport { setAuthToken } from '../../utils/tools';\n\nexport const setAuthStatus = (status, email = null) => ({\n   type: actionTypes.SET_AUTH_STATUS,\n   status,\n   email\n});\n\nexport const setUserType = (status, email = null) => ({\n   type: actionTypes.SET_USER_TYPE,\n   status,\n   email\n});\n\n// Login\nexport const login = data => async dispatch => {\n   try {\n      const token = await loginUser(data);\n      console.log(token.token);\n      if (!token) {\n         dispatch(setAuthStatus(false));\n         return;\n      }\n\n      if (token.user_type === 1) {\n         dispatch(setUserType(false));\n      }\n\n      setAuthToken(token);\n      updateAPIConfig({ authToken: token });\n      dispatch(setAuthStatus(true));\n   } catch (err) {\n      dispatch(setAuthStatus(false));\n   }\n};\n\n// Register\nexport const register = data => async dispatch => {\n   try {\n      const user = await registerUser(data);\n      if (!user) {\n         dispatch(setAuthStatus(false));\n         return;\n      }\n\n      if (user.user_type === 1) {\n         dispatch(setUserType(false));\n      }\n\n      dispatch(setAuthStatus(true));\n   } catch (err) {\n      dispatch(setAuthStatus(false));\n   }\n};\n"]},"metadata":{},"sourceType":"module"}